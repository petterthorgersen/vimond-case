{"version":3,"sources":["../../../../../../src/streaming/rules/synchronization/SynchronizationRulesCollection.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gCA+ByB,4BAA4B;;;;0CACvB,uCAAuC;;;;wCAChC,4BAA4B;;;;mDACjB,uCAAuC;;;;+BAC/D,2BAA2B;;;;AAGnD,IAAM,uBAAuB,GAAG,6BAA6B,CAAC;AAC9D,IAAM,gBAAgB,GAAG,gBAAgB,CAAC;;AAE1C,SAAS,8BAA8B,GAAG;;AAEtC,QAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;;AAE3B,QAAI,QAAQ,YAAA;QACR,2BAA2B,YAAA;QAC3B,cAAc,YAAA,CAAC;;AAEnB,aAAS,UAAU,GAAG;AAClB,mCAA2B,GAAG,EAAE,CAAC;AACjC,sBAAc,GAAG,EAAE,CAAC;;AAEpB,mCAA2B,CAAC,IAAI,CAAC,sDAAoC,OAAO,CAAC,CAAC,MAAM,CAAC;AACjF,6BAAiB,EAAE,6CAAkB,OAAO,CAAC,CAAC,WAAW,EAAE;SAC9D,CAAC,CAAC,CAAC;;AAEJ,sBAAc,CAAC,IAAI,CAAC,2CAAyB,OAAO,CAAC,CAAC,MAAM,CAAC;AACzD,6BAAiB,EAAE,6CAAkB,OAAO,CAAC,CAAC,WAAW,EAAE;AAC3D,mBAAO,EAAE,kCAAY,OAAO,CAAC,CAAC,WAAW,EAAE;SAC9C,CAAC,CAAC,CAAC;KACP;;AAED,aAAS,QAAQ,CAAC,IAAI,EAAE;AACpB,gBAAQ,IAAI;AACR,iBAAK,uBAAuB;AACxB,uBAAO,2BAA2B,CAAC;AAAA,AACvC,iBAAK,gBAAgB;AACjB,uBAAO,cAAc,CAAC;AAAA,AAC1B;AACI,uBAAO,IAAI,CAAC;AAAA,SACnB;KACJ;;AAED,YAAQ,GAAG;AACP,kBAAU,EAAE,UAAU;AACtB,gBAAQ,EAAE,QAAQ;KACrB,CAAC;;AAEF,WAAO,QAAQ,CAAC;CACnB;;AAED,8BAA8B,CAAC,qBAAqB,GAAG,gCAAgC,CAAC;AACxF,IAAI,OAAO,GAAG,8BAAa,mBAAmB,CAAC,8BAA8B,CAAC,CAAC;AAC/E,OAAO,CAAC,uBAAuB,GAAG,uBAAuB,CAAC;AAC1D,OAAO,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;qBAC7B,OAAO","file":"SynchronizationRulesCollection.js","sourcesContent":["/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport FactoryMaker from '../../../core/FactoryMaker';\nimport TimelineConverter from '../../../dash/utils/TimelineConverter';\nimport LiveEdgeBinarySearchRule from './LiveEdgeBinarySearchRule';\nimport LiveEdgeWithTimeSynchronizationRule from './LiveEdgeWithTimeSynchronizationRule';\nimport DashAdapter from '../../../dash/DashAdapter';\n\n\nconst TIME_SYNCHRONIZED_RULES = 'withAccurateTimeSourceRules';\nconst BEST_GUESS_RULES = 'bestGuestRules';\n\nfunction SynchronizationRulesCollection() {\n\n    let context = this.context;\n\n    let instance,\n        withAccurateTimeSourceRules,\n        bestGuestRules;\n\n    function initialize() {\n        withAccurateTimeSourceRules = [];\n        bestGuestRules = [];\n\n        withAccurateTimeSourceRules.push(LiveEdgeWithTimeSynchronizationRule(context).create({\n            timelineConverter: TimelineConverter(context).getInstance()\n        }));\n\n        bestGuestRules.push(LiveEdgeBinarySearchRule(context).create({\n            timelineConverter: TimelineConverter(context).getInstance(),\n            adapter: DashAdapter(context).getInstance()\n        }));\n    }\n\n    function getRules(type) {\n        switch (type) {\n            case TIME_SYNCHRONIZED_RULES:\n                return withAccurateTimeSourceRules;\n            case BEST_GUESS_RULES:\n                return bestGuestRules;\n            default:\n                return null;\n        }\n    }\n\n    instance = {\n        initialize: initialize,\n        getRules: getRules\n    };\n\n    return instance;\n}\n\nSynchronizationRulesCollection.__dashjs_factory_name = 'SynchronizationRulesCollection';\nlet factory = FactoryMaker.getSingletonFactory(SynchronizationRulesCollection);\nfactory.TIME_SYNCHRONIZED_RULES = TIME_SYNCHRONIZED_RULES;\nfactory.BEST_GUESS_RULES = BEST_GUESS_RULES;\nexport default factory;"]}